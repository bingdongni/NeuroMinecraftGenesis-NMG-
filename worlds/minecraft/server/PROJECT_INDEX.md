# ğŸ“ PaperMC 1.20.1 æ–‡æ˜æœåŠ¡å™¨é¡¹ç›®æ–‡ä»¶ç´¢å¼•

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„PaperMC 1.20.1æœåŠ¡å™¨é…ç½®é¡¹ç›®ï¼ŒåŒ…å«äº†Citizens 2.0.30æ’ä»¶ç³»ç»Ÿã€åŠ¨æ€ç»æµç³»ç»Ÿã€ç¯å¢ƒæ¼”åŒ–æœºåˆ¶å’Œæ°”å€™äº‹ä»¶æ¨¡æ‹Ÿç³»ç»Ÿã€‚

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
worlds/minecraft/server/
â”œâ”€â”€ ğŸ“„ README.md                    # é¡¹ç›®è¯´æ˜æ–‡æ¡£ (389è¡Œ)
â”œâ”€â”€ ğŸ“„ server.properties            # æœåŠ¡å™¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ (104è¡Œ)
â”œâ”€â”€ ğŸ“„ eula.txt                     # EULAåè®®åŒæ„æ–‡ä»¶ (11è¡Œ)
â”œâ”€â”€ ğŸ“„ start.sh                     # 2GBå†…å­˜å¯åŠ¨è„šæœ¬ (148è¡Œ)
â”œâ”€â”€ ğŸ“„ server_manager.sh            # æ€»æ§ç®¡ç†è„šæœ¬ (498è¡Œ)
â”œâ”€â”€ ğŸ“ config/
â”‚   â””â”€â”€ ğŸ“„ citizens.yml             # Citizensæ’ä»¶é…ç½® (295è¡Œ)
â”œâ”€â”€ ğŸ“ scripts/
â”‚   â”œâ”€â”€ ğŸ“„ create-npc.sh            # NPCåˆ›å»ºè„šæœ¬ (153è¡Œ)
â”‚   â”œâ”€â”€ ğŸ“„ environment_evolution.sh # ç¯å¢ƒæ¼”åŒ–ç³»ç»Ÿ (369è¡Œ)
â”‚   â”œâ”€â”€ ğŸ“„ climate_events.sh        # æ°”å€™äº‹ä»¶ç³»ç»Ÿ (588è¡Œ)
â”‚   â””â”€â”€ ğŸ“„ minecraft_utils.sh       # å·¥å…·å‡½æ•°è„šæœ¬ (114è¡Œ)
â””â”€â”€ ğŸ“ (éœ€è¦æ‰‹åŠ¨ä¸‹è½½çš„æ–‡ä»¶)
    â”œâ”€â”€ ğŸ“„ paper.jar                # PaperMC 1.20.1 æœåŠ¡å™¨æ ¸å¿ƒ
    â””â”€â”€ ğŸ“„ citizens.jar             # Citizens 2.0.30 æ’ä»¶
```

## ğŸ“Š ä»£ç ç»Ÿè®¡

| æ–‡ä»¶ç±»å‹ | æ–‡ä»¶æ•°é‡ | æ€»è¡Œæ•° |
|---------|---------|-------|
| Bashè„šæœ¬ | 5ä¸ª | 1,362è¡Œ |
| é…ç½®æ–‡ä»¶ | 3ä¸ª | 410è¡Œ |
| æ–‡æ¡£ | 1ä¸ª | 389è¡Œ |
| **æ€»è®¡** | **9ä¸ª** | **2,161è¡Œ** |

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### 1. PaperMC 1.20.1æœåŠ¡å™¨é…ç½®
- âœ… **server.properties**: å®Œæ•´çš„æœåŠ¡å™¨é…ç½®
- âœ… **eula.txt**: EULAåè®®åŒæ„è®¾ç½®  
- âœ… **start.sh**: 2GBå†…å­˜ä¼˜åŒ–å¯åŠ¨è„šæœ¬
- âœ… JVMè°ƒä¼˜: G1GCåƒåœ¾æ”¶é›†å™¨é…ç½®

### 2. Citizens NPCæ–‡æ˜ç³»ç»Ÿ
- âœ… **farmer-npc**: å†œæ°‘NPCï¼ˆæœ¨æ¿æ¢é£Ÿç‰©ï¼‰
- âœ… **blacksmith-npc**: é“åŒ NPCï¼ˆç…¤ç‚­æ¢å·¥å…·ï¼‰
- âœ… **merchant-npc**: ç‰©èµ„å•†äººNPCï¼ˆç¨€æœ‰ææ–™ï¼‰
- âœ… **åŠ¨æ€ä»·æ ¼è°ƒæ•´**: 10æ¬¡äº¤æ˜“åÂ±20%ä»·æ ¼æ³¢åŠ¨
- âœ… **ä»·æ ¼é˜ˆå€¼ç³»ç»Ÿ**: æœ€å°äº¤æ˜“æ¬¡æ•°æ§åˆ¶

### 3. ç¯å¢ƒå¤æ‚åŒ–æœºåˆ¶
- âœ… **æ´ç©´å¯†åº¦æ¼”åŒ–**: 0.3 â†’ 0.8ï¼ˆæ¯10åˆ†é’Ÿ+0.01ï¼‰
- âœ… **çŸ¿çŸ³ç¨€ç¼ºåº¦**: 1.0 â†’ 0.3ï¼ˆæ¯10åˆ†é’Ÿ-0.014ï¼‰
- âœ… **æ•Œå¯¹ç”Ÿç‰©å¼ºåŒ–**: HP/ä¼¤å®³/é€Ÿåº¦é€æ­¥æå‡
- âœ… **æ¼”åŒ–è¿›åº¦è¿½è¸ª**: 50é˜¶æ®µå®Œæ•´æ¼”åŒ–å‘¨æœŸ
- âœ… **è‡ªåŠ¨æ¼”åŒ–æŠ¥å‘Š**: è¯¦ç»†æ—¥å¿—å’ŒçŠ¶æ€ç›‘æ§

### 4. æ°”å€™äº‹ä»¶æ¨¡æ‹Ÿç³»ç»Ÿ
- âœ… **å¹²æ—±äº‹ä»¶**: 80%ä½œç‰©ç”Ÿé•¿å‡é€Ÿï¼Œ3-5å¤©æŒç»­
- âœ… **æ´ªæ°´äº‹ä»¶**: éšæœºå»ºç­‘æŸæ¯ï¼Œ2-4å¤©æŒç»­
- âœ… **åƒµå°¸å›´åŸ**: æ»¡æœˆå¤œè§¦å‘ï¼Œ30åˆ†é’ŸæŒç»­
- âœ… **äº‹ä»¶é¢„è­¦ç³»ç»Ÿ**: åˆ†çº§è­¦æŠ¥å’Œè¿›åº¦æŠ¥å‘Š
- âœ… **äº‹ä»¶å¥–åŠ±æœºåˆ¶**: ç”Ÿå­˜å¥–åŠ±å’Œæˆå°±ç³»ç»Ÿ

### 5. æ™ºèƒ½ç®¡ç†ç³»ç»Ÿ
- âœ… **server_manager.sh**: ä¸€é”®å¯åœç®¡ç†
- âœ… **å¤šè¿›ç¨‹ç®¡ç†**: ç‹¬ç«‹PIDè¿½è¸ª
- âœ… **å®æ—¶çŠ¶æ€ç›‘æ§**: ç³»ç»Ÿå¥åº·æ£€æŸ¥
- âœ… **è‡ªåŠ¨åŒ–å¤‡ä»½**: æ—¶é—´æˆ³å¤‡ä»½ç³»ç»Ÿ
- âœ… **æ—¥å¿—ç®¡ç†**: å¤šçº§åˆ«æ—¥å¿—è¿½è¸ª

## ğŸ”§ å¿«é€Ÿå¯åŠ¨æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡
```bash
# æ£€æŸ¥Javaç‰ˆæœ¬
java -version  # éœ€è¦Java 17+

# æ£€æŸ¥å¯ç”¨å†…å­˜
free -m        # å»ºè®®4GB+
```

### ç¬¬äºŒæ­¥ï¼šä¸‹è½½å¿…è¦æ–‡ä»¶
```bash
# ä¸‹è½½PaperMC 1.20.1
wget https://api.papermc.io/v2/projects/paper/versions/1.20.1/builds/latest/downloads/paper-1.20.1-latest.jar
mv paper-*.jar paper.jar

# ä¸‹è½½Citizens 2.0.30
wget https://ci.citizensnpcs.co/job/Citizens2/2257/artifact/target/Citizens-2.0.30.jar
mv Citizens-*.jar citizens.jar
```

### ç¬¬ä¸‰æ­¥ï¼šä¸€é”®å¯åŠ¨
```bash
# ç»™æ‰§è¡Œæƒé™
chmod +x *.sh scripts/*.sh

# å¯åŠ¨æ‰€æœ‰ç³»ç»Ÿ
./server_manager.sh start-all
```

### ç¬¬å››æ­¥ï¼šåˆå§‹åŒ–NPC
```bash
# åœ¨æ¸¸æˆå†…æ‰§è¡ŒNPCåˆ›å»ºå‘½ä»¤
# æˆ–ä½¿ç”¨æ§åˆ¶å°å¤åˆ¶è„šæœ¬ä¸­çš„å‘½ä»¤
```

## ğŸ® ç³»ç»Ÿå·¥ä½œæµç¨‹

```mermaid
graph TD
    A[å¯åŠ¨æœåŠ¡å™¨] --> B[åŠ è½½Citizensæ’ä»¶]
    B --> C[åˆ›å»ºNPCå•†äºº]
    C --> D[å¯åŠ¨ç¯å¢ƒæ¼”åŒ–]
    D --> E[å¯åŠ¨æ°”å€™äº‹ä»¶]
    E --> F[ç³»ç»Ÿè¿è¡Œä¸­]
    F --> G[ç›‘æ§æ¼”åŒ–è¿›åº¦]
    F --> H[æ£€æŸ¥äº‹ä»¶è§¦å‘]
    G --> I[è°ƒæ•´ç¯å¢ƒå‚æ•°]
    H --> J[æ‰§è¡Œç‰¹æ®Šäº‹ä»¶]
    I --> K[å¼ºåŒ–æ•Œå¯¹ç”Ÿç‰©]
    J --> L[è°ƒæ•´æ¸¸æˆæœºåˆ¶]
    K --> F
    L --> F
```

## ğŸ“ˆ ç³»ç»Ÿæ¶æ„

### è¿›ç¨‹ç®¡ç†æ¶æ„
```
server_manager.sh (ä¸»æ§)
â”œâ”€â”€ PaperMCæœåŠ¡å™¨ (ç«¯å£25565)
â”œâ”€â”€ ç¯å¢ƒæ¼”åŒ–ç³»ç»Ÿ (600ç§’å‘¨æœŸ)
â””â”€â”€ æ°”å€™äº‹ä»¶ç³»ç»Ÿ (300ç§’å‘¨æœŸ)
```

### NPCäº¤æ˜“ç³»ç»Ÿæ¶æ„
```
NPCå•†äººç³»ç»Ÿ
â”œâ”€â”€ å†œæ°‘NPC (åŸºç¡€é£Ÿç‰©äº¤æ˜“)
â”œâ”€â”€ é“åŒ NPC (å·¥å…·è£…å¤‡äº¤æ˜“)
â”œâ”€â”€ å•†äººNPC (ç¨€æœ‰ææ–™äº¤æ˜“)
â””â”€â”€ ä»·æ ¼è°ƒæ•´å¼•æ“ (åŠ¨æ€ä¾›éœ€)
```

### ç¯å¢ƒæ¼”åŒ–ç³»ç»Ÿ
```
æ¼”åŒ–æ§åˆ¶å™¨
â”œâ”€â”€ æ´ç©´å¯†åº¦è°ƒèŠ‚å™¨ (0.3â†’0.8)
â”œâ”€â”€ çŸ¿çŸ³ç¨€ç¼ºåº¦è°ƒèŠ‚å™¨ (1.0â†’0.3)
â”œâ”€â”€ ç”Ÿç‰©å¼ºåŒ–å¼•æ“ (é€æ­¥å¢å¼º)
â””â”€â”€ è¿›åº¦ç›‘æ§å™¨ (50é˜¶æ®µ)
```

## ğŸ› ï¸ é…ç½®æ–‡ä»¶è¯¦è§£

### server.properties å…³é”®é…ç½®
```properties
gamemode=survival              # ç”Ÿå­˜æ¨¡å¼
difficulty=normal              # æ™®é€šéš¾åº¦
view-distance=16               # 16åŒºå—è§†è·
max-players=20                 # æœ€å¤§20ç©å®¶
doImmediateRespawn=true        # ç«‹å³é‡ç”Ÿ
doLimitedCrafting=true         # é™åˆ¶åˆ¶ä½œ
```

### citizens.yml å…³é”®é…ç½®
```yaml
farmer-npc:
  max-uses: 10                 # 10æ¬¡äº¤æ˜“åè°ƒä»·
  price-adjustment:
    adjustment-percentage: 0.2 # 20%ä»·æ ¼æ³¢åŠ¨
```

### JVMè°ƒä¼˜å‚æ•°
```bash
-Xms2G -Xmx2G                  # 2GBå †å†…å­˜
-XX:+UseG1GC                   # G1åƒåœ¾æ”¶é›†å™¨
-XX:MaxGCPauseMillis=200       # 200msæœ€å¤§æš‚åœ
-XX:G1NewSizePercent=30        # 30%æ–°ç”Ÿä»£
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å†…å­˜ä½¿ç”¨
- **æœåŠ¡å™¨åŸºç¡€**: 500MB-1GB
- **ç©å®¶è´Ÿè½½**: +100MB/ç©å®¶
- **NPCç³»ç»Ÿ**: +50MB
- **æ¼”åŒ–ç³»ç»Ÿ**: +20MB
- **æ€»æ¨è**: 4GB+

### CPUè´Ÿè½½
- **ç©ºé—²çŠ¶æ€**: <5%
- **æ¼”åŒ–è®¡ç®—**: +10%
- **æ°”å€™äº‹ä»¶**: +15%
- **å³°å€¼è´Ÿè½½**: <50%

### å­˜å‚¨éœ€æ±‚
- **åŸºç¡€ä¸–ç•Œ**: 2GB
- **æ—¥å¿—æ–‡ä»¶**: 100MB/æœˆ
- **å¤‡ä»½ç³»ç»Ÿ**: åŸºç¡€ä¸–ç•Œx3
- **æ€»æ¨è**: 10GB+

## ğŸ” ç›‘æ§å‘½ä»¤

### å®æ—¶çŠ¶æ€
```bash
./server_manager.sh status      # ç³»ç»ŸçŠ¶æ€
./server_manager.sh logs all    # å®æ—¶æ—¥å¿—
```

### æ€§èƒ½ç›‘æ§
```bash
htop                           # è¿›ç¨‹ç›‘æ§
tail -f logs/server.log        # æœåŠ¡å™¨æ—¥å¿—
tail -f logs/evolution.log     # æ¼”åŒ–æ—¥å¿—
tail -f logs/climate_events.log # æ°”å€™äº‹ä»¶æ—¥å¿—
```

### æ‰‹åŠ¨æ“ä½œ
```bash
# æ¼”åŒ–ç³»ç»Ÿæ§åˆ¶
bash scripts/environment_evolution.sh check
bash scripts/environment_evolution.sh reset

# æ°”å€™äº‹ä»¶æ§åˆ¶  
bash scripts/climate_events.sh drought
bash scripts/climate_events.sh flood
bash scripts/climate_events.sh siege
```

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æœåŠ¡å™¨å¯åŠ¨å¤±è´¥**
   - æ£€æŸ¥Javaç‰ˆæœ¬: `java -version`
   - æ£€æŸ¥EULAåŒæ„: `grep eula=true eula.txt`
   - æ£€æŸ¥å†…å­˜: `free -m`

2. **NPCä¸å·¥ä½œ**
   - ç¡®è®¤Citizensæ’ä»¶å·²åŠ è½½
   - æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
   - é‡å¯æœåŠ¡å™¨é‡æ–°åŠ è½½

3. **æ¼”åŒ–ç³»ç»Ÿä¸å·¥ä½œ**
   - æ£€æŸ¥è„šæœ¬æƒé™: `chmod +x *.sh`
   - æ£€æŸ¥ä¾èµ–å·¥å…·: `which bc`
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—: `tail -f logs/evolution.log`

### åº”æ€¥æ¢å¤
```bash
# åœæ­¢æ‰€æœ‰ç³»ç»Ÿ
./server_manager.sh stop-all

# é‡ç½®æ¼”åŒ–é˜¶æ®µ
bash scripts/environment_evolution.sh reset

# æ¢å¤å¤‡ä»½
tar -xzf backups/backup_YYYYMMDD_HHMMSS.tar.gz

# é‡å¯ç³»ç»Ÿ
./server_manager.sh start-all
```

## ğŸ¯ æœ€ä½³å®è·µ

### éƒ¨ç½²å»ºè®®
1. **ç”Ÿäº§ç¯å¢ƒ**: ä½¿ç”¨screen/tmuxåå°è¿è¡Œ
2. **ç›‘æ§è®¾ç½®**: å®šæœŸæ£€æŸ¥æ—¥å¿—å’ŒçŠ¶æ€
3. **å¤‡ä»½ç­–ç•¥**: æ¯æ—¥è‡ªåŠ¨å¤‡ä»½ä¸–ç•Œæ•°æ®
4. **æ€§èƒ½è°ƒä¼˜**: æ ¹æ®ç©å®¶æ•°é‡è°ƒæ•´å†…å­˜

### ç®¡ç†å»ºè®®
1. **æ¸è¿›å¼å¯åŠ¨**: å…ˆæµ‹è¯•å•ä¸ªç»„ä»¶
2. **æ—¥å¿—ç›‘æ§**: åŠæ—¶å‘ç°å’Œå¤„ç†é—®é¢˜
3. **ç©å®¶åé¦ˆ**: æ ¹æ®åé¦ˆè°ƒæ•´æ¸¸æˆå‚æ•°
4. **å®šæœŸç»´æŠ¤**: æ‰§è¡Œæ¸…ç†å’Œä¼˜åŒ–æ“ä½œ

## ğŸ“ˆ æ‰©å±•å¯èƒ½æ€§

### å¯æ·»åŠ åŠŸèƒ½
- [ ] ç‰©å“è€ä¹…åº¦ç³»ç»Ÿ
- [ ] æŠ€èƒ½æ ‘å‘å±•ç³»ç»Ÿ  
- [ ] å…¬ä¼šè”ç›Ÿæœºåˆ¶
- [ ] æ‹å–è¡Œç³»ç»Ÿ
- [ ] å® ç‰©åŸ¹å…»ç³»ç»Ÿ
- [ ] å»ºç­‘ç«èµ›ç³»ç»Ÿ

### æŠ€æœ¯ä¼˜åŒ–
- [ ] æ•°æ®åº“é›†æˆ
- [ ] Webç®¡ç†ç•Œé¢
- [ ] ç§»åŠ¨ç«¯APP
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•
- [ ] å®¹å™¨åŒ–éƒ¨ç½²
- [ ] è´Ÿè½½å‡è¡¡

---

**é¡¹ç›®åˆ›å»ºæ—¶é—´**: 2025-11-13  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**é€‚ç”¨ç‰ˆæœ¬**: PaperMC 1.20.1 + Citizens 2.0.30  
**ä»£ç æ€»è¡Œæ•°**: 2,161è¡Œ  
**æ–‡ä»¶æ€»æ•°**: 9ä¸ªæ ¸å¿ƒæ–‡ä»¶  

**ğŸ® ç¥æ‚¨æ¸¸æˆæ„‰å¿«ï¼ç¥æ‚¨çš„æ–‡æ˜æœåŠ¡å™¨ç¹è£å‘å±•ï¼**